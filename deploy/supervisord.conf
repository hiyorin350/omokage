[supervisord]
nodaemon=true
user=root
; supervisord 自身のログを標準出力へ
logfile=/dev/stdout
logfile_maxbytes=0
pidfile=/tmp/supervisord.pid
; 子プロセスのデフォルトログディレクトリ（存在必須）
childlogdir=/var/log/supervisor

[program:backend]
directory=/app/backend
command=/venv/bin/gunicorn config.wsgi:application -b 0.0.0.0:10001 --workers 3 --timeout 60
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
autorestart=true
priority=10

[program:frontend]
directory=/app/frontend/.next/standalone
command=node server.js -p ${PORT}
environment=NODE_ENV=production
stdout_logfile=/dev/stdout
stderr_logfile=/dev/stderr
autorestart=true
priority=20
